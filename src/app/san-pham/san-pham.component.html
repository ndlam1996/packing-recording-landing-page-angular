<div class="products-container" [class.hide-header]="hideHeader">
  <!-- <h1>Sản Phẩm</h1> -->

  @if(!hideHeader){<div class="product-section">
    <div class="section-head">
      <p class="eyebrow">Gói dịch vụ</p>
      <h2>Chọn gói phù hợp theo quy mô đơn hàng</h2>
      <p>Miễn phí 5GB lưu trữ video. Có tùy chọn nâng cao cho shop nhiều đơn hàng cần thêm dung lượng.</p>
    </div>
    <div class="product-card main-product">

      <div class="pricing-section">
        <h3>Bảng giá linh hoạt</h3>
        <div class="pricing-cards">
          <div class="price-card">
            <h4>Gói Free</h4>
            <p class="price">Miễn phí</p>
            <ul>
              <li>5GB/tháng lưu trữ cloud</li>
              <li>Hỗ trợ cơ bản</li>
            </ul>
          </div>

          <div class="price-card premium">
            <h4>Gói Premium</h4>
            <div class="premium-pricing">
              <div class="pricing-choice">
                <p class="choice-title">Lựa chọn gói thời gian</p>
                <div class="choice-grid">
                  <div class="choice-card active">
                    <div class="choice-label">Hàng tháng</div>
                    <div class="choice-price">
                      <span class="amount">99,000đ</span>
                      <span class="unit">/tháng</span>
                    </div>
                  </div>
                  <div class="choice-card">
                    <div class="choice-label">6 tháng</div>
                    <div class="choice-price">
                      <span class="amount">79,000đ</span>
                      <span class="unit">/tháng</span>
                    </div>
                    <div class="choice-total">Tổng: 474,000đ</div>
                    <div class="choice-badge">Tiết kiệm 20%</div>
                  </div>
                </div>
              </div>

              <div class="discount-box">
                <div class="discount-badge">GIẢM SỐC 50%</div>
                <div class="old-price">1.188.000đ</div>
                <div class="big-price">
                  <span class="amount">49.000đ</span>
                  <span class="unit">/tháng</span>
                </div>
                <div class="yearly-note">(Chỉ 590.000đ/năm)</div>
                <div class="best-note">TIẾT KIỆM 50% - TỐT NHẤT</div>
              </div>
            </div>
            <ul class="premium-feature-list">
              <li>Lưu trữ không giới hạn tài khoản OneDrive của bạn</li>
              <li>30GB lưu trữ trên cloud Cam Check</li>
              <li>Hỗ trợ kết nối nền tảng bán hàng Sapo, Haravan...</li>
              <li>Thêm dung lượng cloud Cam Check tùy chọn</li>
              <li>Hỗ trợ ưu tiên 1-1 24/7</li>
            </ul>
          </div>
        </div>
      </div>

    </div>
  </div>}

  <!-- Product Cards Section -->
  <div class="product-cards-section">
    <div class="section-head">
      <p class="eyebrow">Thiết bị hỗ trợ</p>
      <h2>Sản phẩm nổi bật</h2>
      <p>Chọn thiết bị phù hợp để triển khai quy trình quay video đóng hàng nhanh chóng.</p>
    </div>
    <div class="products-grid">
      <app-product-card *ngFor="let product of products" [product]="product"
        (buyNow)="openContactPopup(product)"></app-product-card>
    </div>

    <!-- Popup thông tin liên hệ -->
    <div class="contact-popup" *ngIf="showContactPopup">
      <div class="popup-content">
        <button class="close-btn" (click)="closeContactPopup()">×</button>
        <h3>Liên hệ mua hàng</h3>
        <div class="contact-list">
          <a href="https://zalo.me/0363923471" target="_blank" class="contact-item">
            <img src="assets/logo/zalo-icon.png" alt="Zalo" class="contact-icon" />
            <span>Zalo: 0363923471</span>
          </a>
          <a href="https://www.facebook.com/quayvideodongdon" target="_blank" class="contact-item">
            <img src="assets/logo/facebook-icon.webp" alt="Facebook" class="contact-icon" />
            <span>Facebook: CAM CHECK</span>
          </a>
          @if(selectedProduct?.shopeeLink){ <div class="shopee-row">
            <a [href]="selectedProduct?.shopeeLink" target="_blank" class="contact-item shopee">
              <img src="assets/logo/shopee-logo.jpg" alt="Shopee" class="contact-icon" />
              <span>Shopee: CAM CHECK</span>
              <button class="copy-btn" (click)="copyShopeeLink($event)" [class.copied]="isCopied"
                (mouseenter)="showTooltip = true" (mouseleave)="showTooltip = false">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                  stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                  class="copy-icon">
                  <rect width="14" height="14" x="8" y="8" rx="2" ry="2" />
                  <path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2" />
                </svg>
              </button>
            </a>
          </div>}
        </div>

        <!-- Tooltip ngoài thẻ a -->
        <div class="copy-tooltip" *ngIf="showTooltip || isCopied" [class.copied]="isCopied">
          {{isCopied ? 'Đã copy!' : 'Copy link'}}
        </div>
      </div>
      <div class="popup-overlay" (click)="closeContactPopup()"></div>
    </div>
  </div>
  <app-support-contact></app-support-contact>
</div>